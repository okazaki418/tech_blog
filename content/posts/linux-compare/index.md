+++
title = "Linuxディストリビューションの選び方"
date = 2023-11-08T10:37:35+09:00
tags = ["Linux"]
draft = false
+++

## Linuxのディストリビューション
Linuxと一口に言ってもたくさんのディストリビューションがあります。  
初めてLinuxを使う方、初めてサーバーOSを選定する方などは迷うことと思います。  
そこで完全に主観でいくつかのディストリビューションの特徴と選ぶポイントを書き連ねようと思います。  
~~まあ基本は脳死でArch Linuxですけどね~~  

## Arch系
### Arch Linux
Arch Linuxについては僕が愛用しているため、偏った意見になっているかもしれません。  
ご承知おきください。  

Linuxを普段遣いしている人がよく使っている印象ですね（僕の周りだけかもしれませんが）  
インストールした段階では本当に基本的なパッケージしか入っていません。  
というかインストールしたときにはGUIすら与えられていません。  
ハードルが高いですね。  
逆に要らないことをしないため、（基本的に）自分が動かしたものしか動いていないため管理が楽です。    
あとはあまりオープンソースに固執していないのも特徴です。
他のディストリビューションだと初期リポジトリに入っていないようなアプリケーションもArch Linuxの初期リポジトリには入っています。  

#### メリット
- インストールした段階で要らないサービスが動いていない
- パッケージマネージャー（`pacman`）が優秀
- オープンではないアプリケーションも初期リポジトリに入っている
- コミュニティによって運営されているリポジトリ（AUR）を使えば非常に多くのアプリケーションがインストール可能
- アプリケーションの更新が早い
    - GNOMEの場合は更新が早すぎて拡張機能の更新が追いつかず、まともに運用できなかったため一長一短かも
- ArchWikiという色々な設定や説明が載っている素晴らしいドキュメントがある
- ローリングリリースである
    - ディストリビューション自体にバージョンがない（常に最新）

#### デメリット
- インストールが非常に面倒
    - CLIのみ（TUIもあるけれど）で設定がする必要がある
    - ブートローダー周りでいっつも下手をこく（個人的な感想）
    - 慣れれば（ArchWikiを見ながら）普通にインストールできる
- 初期状態で入っているアプリケーションが少なすぎる
    - テキストエディタが何もなかった気がする（viすら）
    - sudoも入っていない
    - インストール時に追加で入れることは可能
- 便利なサービスが初期状態では何一つ動いていない
    - 自動更新はない
    - DHCPクライアントも動いていない
- 更新が早すぎるため安定動作してほしい環境では運用が難しい部分がある
    - [公式](https://wiki.archlinux.jp/index.php/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC)が弁解してはいる
        - Arch Linuxの公式サイトはArch Linuxサーバーで動いているらしい
    - 更新してカーネルを入れ替えまくってると稀にカーネルパニックを起こす
        - カーネルをLTSにすれば他のディストリビューションと変わらない
- 他のディストリビューションよりも設定しなければ行けない部分が多いことがある
    - LDAP使うときにPAMの設定書き換えろと言われたのはびっくりした

#### 総評
本当に初心者の初心者が使えるものではない（白目）  
ただ少しLinuxがわかるようになってきたら触ってみると良いと思います。  
環境を作るのに色々なアプリのインストール、設定の記述が必要になり、大変勉強になります。  
ArchWikiがあるから調べるのが比較的容易なのもポイントが高いですね。  
何にも入ってないけれど、決して不親切ではないため、そんなに使いづらさがないと思います。  
最大の関門のOSインストールさえできればの話ですが…  
まあそれも含めてなかなか他のディストリビューションで体験できないことができるし、ドキュメントもしっかりしているため、初心者向けディストリビューションだと思わなくもないです。  
（何度も言っているけれど）インストールさえできればの話ですが…

Linuxに慣れている人であればかなり使いやすいと思います。  
パッケージマネージャー（とAURヘルパー）だけで殆どのパッケージをインストールできるため、少し珍しかったりオープンではないアプリケーションをインストールするのも非常に簡単です。  
更新が早くサーバーに向かないと言われることもありますが、LTSカーネルにすればカーネル周りでのエラーはまあ起きないし（少なくとも7年は見てない）アプリケーションのインストールは楽だし、ドキュメントもある。  
素晴らしいですね。
~~ついこの間Linuxを覚えたと思ったのに既に7年経っていることに2行前に気づいて絶望しました~~

### Manjaro Linux
Arch系のディストリビューションです。  
Arch系なのにユーザーフレンドリーです。  
Arch Linuxも慣れてしまえばユーザーフレンドリーだと思いますが、そういう話ではなくArchベースのUbuntuのような立ち位置を目指しているような感じですかね？  
GUIが最初からあるし、GUIでポチポチやってるだけでインストールできるし、AURヘルパーも最初から入ってる（`pacman`でインストールできただけかも）し、素晴らしいですね。  
個人的にはかなりおすすめ…と言いたいところですがAUR周りで少し懸念点があります。  

#### メリット
- インストールが簡単
- 操作が簡単
- ArchWikiの情報がほとんどそのまま使える
- ローリングリリースである
- AURが使える
- アプリケーションの更新が早い

#### デメリット
- AURが稀によく動かない
    - Manjaroは独自のリポジトリを持っているためArchのパッケージ更新と完全に一致していない
        - 多分Archのパッケージが更新されてから少し待たないとパッケージの更新が反映されない  
- Arch Linuxの公式リポジトリを使用していないため、情報がそのまま使えないケースがある  

#### 総評
思ったより弱点がなかった…  
たまにAURで更新が効かないことだけで敬遠していましたが、かなりいいディストリビューションですね。  
Archの公式リポジトリだとそこそこ不具合引くけれど、Manjaroだとあっちがもう1回精査してくれるので少し安心ですしね。  
強いて言うならばArchのフォーラムの情報を完全には使えないのが少し痛いですね。  
Manjaro特有の不具合を引いたときに厳しいです。  
まあさしたる問題ではないのでかなりいい選択肢かもしれません。  

### EndeavourOS
Arch系のディストリビューションです。  
Arch LinuxにGUIとインストーラーが付いただけくらいのイメージです。  
何年か前まであったAntergosというディストリビューションの後継的な立ち位置ですね。  
僕が初めて使ったArch系で思い入れがあるため偏った意見になるかもしれません。  

#### メリット
- インストールした段階で要らないサービスが動いていない
- パッケージマネージャー（`pacman`）が優秀
- オープンではないアプリケーションも初期リポジトリに入っている
- AURが使える
- アプリケーションの更新が早い
- ほとんどArchであるためArchWikiが使える
- ローリングリリースである

#### デメリット
- 初期状態で入っているアプリケーションが少ない
- 更新が早すぎるため安定動作してほしい環境では運用が難しい部分がある
- 他のディストリビューションよりも設定しなければ行けない部分が多いことがある

#### 総評
ほとんどArchです。  
LiveイメージはGUIがあり、インストーラーも用意されているため導入ハードルがめちゃくちゃ低いです。  
その他のメリットもデメリットもArch Linuxと同じです。  
その割にはだいぶ易しいです。  
Debian系とFedoraしか触ったことがなくても触れるくらい易しいです。  
やはりArch Linuxはどう考えてもインストールが足を引っ張っていますね。  
Manjaroのほうが親切ですが、勉強も兼ねたい人はManjaroよりこっちのほうが良いかもしれません。  


## Debian系
### Ubuntu
~~苦手です~~  
あまり得意なディストリビューションではないため、偏った意見になっているかもしれません。  
ご承知おきください。  

様々な用途で使われるディストリビューションですね。  
サーバーにも使えるし、普段遣いもできる万能型です。  
しかも操作も簡単ですね。
インストールも簡単でポチポチしているだけで終わります。  
WindowsやmacOSを触ったことがアレば正直何も勉強せずに使えるディストリビューションです。

#### メリット
- インストールが簡単
- 操作が簡単
- ユーザーが多いためネット上に情報が多い
- Debian系であるため、Debianの資産も使える
- 大体のアプリケーションが公式対応している
- サポートが長い（LTSなら5年（Proなら10年））

#### デメリット
- 最初から要らないサービスを動かしすぎている
    - パッケージの自動更新が`apt`の何かをロックしてアプリをインストールしたいタイミングでできないことが多発する
- 細かいところで不親切
    - LaTeXのコンパイルの初期設定ではフォントを埋め込まない（しばらく気づかなかった）
- snap周りの不具合が多い
    - ファイルシステム周りでエラー吐くのをそこそこみた（少なくともArchのカーネルパニックよりは見た）
    - そして`apt`を叩いても後ろでsnap使ってインストールするから避けられない
    - snap使っているソフトでは日本語入力できない問題が昔あった（今はわからない）
- インストールできるパッケージが古い
    - Node.jsとかDockerとか頻繁に使うものですら古い
        - 特にNode.jsだと最近のパッケージの要求に応えられないくらい古いことがある
- エラーを頻繁に吐く上にエラーの原因が特定できない
    - 普段使っているArchはもちろん、RHEL系もSUSE系もDebianもエラーの原因を特定できるのにUbuntuはできなかった…
        - シンプルに僕の実力不足という可能性も否めない
    - しかも少なくはない頻度（年1回から3回）でクリーンインストールが必要そうなことになる
        - これはサーバー運用ではなくデスクトップ運用の話ですね

#### 総評
無償で使えるため文句を言う事自体がおこがましい話です。  
感謝して使わなければいけません。  
しかしそれでも他に選択肢があるなら自分はそっちを使いたいと思っています。  
Ubuntu特有の設定とかサービスの動作状況とかが多すぎて少し混乱するんですよね。
まあそうは言っても多くの人が使ってますからね。  
WSLとか考えると、一番汎用性高いのは多分Ubuntuですし。  
自分もWSLはUbuntuですからね。  

散々色々言いましたがやっぱりLinuxについて何も知らない人でも使えるのが大きいですね。  
本当に一番最初に触るものとしては中々良いのではないでしょうか。  

### Debian
Ubuntuの親ですね。  
パッケージマネージャーが`apt`で共通していることや基本的な部分がUbuntuと共通しているところが良いですね。  
Ubuntuの情報がそのまま使えるケースが多いです。  
これはサーバー系OSであるため、普段遣いをするのはどうかなぁ…と思います。  
ただ僕自身が普段遣いしていた時期があるため、できないことはありません。  

#### メリット
- 軽い
    - 多分初期状態で無駄なパッケージが入っていない
- 安定している
    - 変なエラーを吐いているのを見たことがない
- ユーザーが多くネットにたくさんあるUbuntuの情報の一部が使える

#### デメリット
- フリーであることにこだわりすぎている
    - フリーでないアプリやドライバを入れるのは大変
    - `apt`をそのまま叩いても欲しいソフトがないことがそこそこある
- 驚くほどアプリケーションが古い
    - 安定動作のために安定している（いわゆる「枯れた」に近い）バージョンでアプリケーションが固定されている
    - サーバー用ディストリビューションであることを考えるとそこまで不思議ではない
    - 僕はEmacsのバージョンの問題で Debian -> Ubuntu系 -> Arch系 と進んでいった

#### 総評
癖のない安定したディストリビューションですね。  
サポート期間も5年あるし、困らないと思います。  
ただデスクトップで使うにはアプリケーションが古すぎる。  
もちろんこれはDebian側が意図してやっていることであるため、悪いことではありません。  
サーバー用ディストリビューションをデスクトップで使うことの方が悪い気がします。  
ただ古いアプリケーションでも困らない人であれば、なんの問題もなく使用できます。  
なんなら安定しているし動作も軽快で、良い選択肢とすら言えます。  
一応普通に使われるstableの他に、testingやunstableという若干不安定な代わりにアプリケーションが少し新しいというバージョンもあります。  
雰囲気で変えてみるのも良いかもしれませんね。  

## RHEL系
### RHEL（クローンも含める）
Red Hat Enterprise Linuxです。  
CentOSとかRocky LinuxとかAlma Linuxとかのクローン元ですね。  
クローンについてもここで言及します。  
サーバー用のディストリビューションです。  
パッケージマネージャーは`dnf`でFedoraと一緒ですね。  
珍しく有償のディストリビューションです（一応個人なら無料で使えなくもないです）  
クローンなら無料です。  
ただ最近ちょっと怪しくなってきたのが少しまずいかもしれません。  

#### メリット
- 安定している
    - 変なエラーを吐いているのを見たことがない
- ネット上に情報が多い
- セキュア
    - SELinuxが導入されている
    - 企業がしっかりメンテナンスしたもの（とそのクローン）だから安心
- サポート期間が長い

#### デメリット
- RHEL本家は有償
- Red Hat社がソースコードの公開を限定しはじめた
    - クローンが怪しくなってきた
- 初期から動いているサービスが多い
    - Ubuntuほどゴチャゴチャやらないけれど、何動いているかよくわからない
- 一般的なアプリケーションがRed Hat謹製アプリケーションに置き換えられていることがある
    - OpenLDAP -> 389 Directory Server
    - Docker -> Podman

#### 総評
サーバー用のディストリビューションとしてはこれが一番ですね。  
安定しているしセキュアだしサポート期間が長いし。  
大体我々のような一般市民はクローンを使っていたのですが、それが怪しくなってきたのが最近の懸念点でしょうか。  
CentOSというクローンもRed Hat社が管理したと思ったらなんか別物になってしまったし…  
それでもサーバーならこのディストリビューションが良い気がしますね。  

## 独立系
### Fedora
Fedoraはデスクトップで使えるRHELみたいなもの…くらいの認識ですね（サーバー版Fedoraあるけれど）  
対象としているユーザーはデスクトップでUbuntuを使う人達と同じあたりっぽいイメージです。  
サーバー版はFedora使うくらいならRHELのクローン使うため使ったことがありません。  
そして周りで使っているのも見たことがないのでよくわからないです。  
ということでデスクトップ版についてだけ言及します。  

#### メリット
- 操作が簡単
    - Ubuntuが一番操作しやすいだろうから最初は「比較的」と書いていたけれど、Ubuntuとそんなに差がない気がしてきた。
    - DEはGNOMEだし他に不親切な部分もなかったし普通に簡単です。
- パッケージの更新が早い
    - Archと比較したことはないけれど、基本的に最新版が入った記憶があります。
- そこそこ色々なアプリが入る

#### デメリット
- パッケージマネージャー（dnf）の動作がモッサリしている
    - 何故かワンテンポ遅れます。
- SELinuxがうるさい
    - 素晴らしいセキュリティですが、果たしてデスクトップ程度に必要なのでしょうか。
        - あって困らないならある方が良い気もしますが、利便性と等価交換ですね。
    - 普段遣いしているとそこそこアラートが上がります（直すことができるのであれば大変勉強になるとは言えます）
        - これがArch Linuxだったら絶対メリットの方に入れているので贔屓が出ていますね。
- サポート期間が短い
    - 確か1年くらい

#### 総評
初心者でも比較的とっつきやすくてそんなに要らんこともしない良さげなディストリビューションだと思います。  
パッケージの更新が早いところが大変良い。ベリーグッド。  
大きい欠点はSELinuxとサポート期間くらいですかね。  
SELinuxも使い方によっては普段遣いで鬱陶しいくらいアラートが上がってくるくらいのもので、なんなら無効にしていまえばいいだけです。  
どうせ将来RHEL触るだろうから勉強に…という意味で考えればプラスとも言えます。  
そんなことより最大の問題はサポート期間です。  
インストールしてから最大1年しか使えません。  
ディストリビューションのサポート終了はアプリの更新ができなくなるため致命的です。  
そのためサポート期間の短いFedoraは大変厄介です。  
ローリングリリースのArch Linuxに慣れていると恐ろしくて使えたものではありません。  
~~結局Archでも構成が気に食わなくなって1年に1回くらい再インストールするんだけどね~~  
1年しか使えなくてもいいのであれば、かなりのおすすめディストリビューションです。  

### Gentoo Linux
癖がありすぎるディストリビューションですね。  
ローリングリリースであることから昔はArchと並んで紹介されていましたが、最近は全然聞きませんね。  
その理由はパッケージを入れる際に毎回毎回ビルドすることです。  
Portageというパッケージマネージャーがそういうふうに作られているみたいです。
自分の好きなように調整してビルドできるのが良いらしいですが、とんでもない作業です。  
僕ならば耐えられません。  
常用している人も知らないです。  
そして僕も使ったことがありません。  
高校生のときに使おうとしましたが、~~英語が読めなくて~~インストールに失敗して以来触っていません。  
限界まで性能を追い求めたいならば使っても良いかもしれませんが、ローリングリリース目的ならばArchで事足りると思います。  
ただいつかは使ってみたいですね~~（と言い続けて5年以上）~~

## まとめ
途中でめんどくさくなりました…  
本当に初心者が初めて使うならUbuntuかManjaro（でもUbuntuのほうが日本語情報が多いから向いている気がする）  
Linuxに慣れてきてデスクトップで使うならばEndeavourOSかFedoraかManjaro
Linuxでサーバーを立てるならUbuntuかDebianかRHEL（クローン）  
何でもかんでも自分でやりたいならArch LinuxかEndeavourOSとかですかね。  
本当はSUSEとかにも触れたかったけれど、あまり触ってないこととそんなに日本語情報がないということからノータッチでした。  
暇があったら後で書き足します。  

### 追記
私はスペックがかなり低いVPSを借りて、その中でRocky Linux 9を動かしています。  
Rocky Linuxを選んだ理由は、外に公開するサーバだからセキュアにしたかったというものです。  
（本当はセキュア云々よりArch Linuxが良かったけれど選ぶことができなかった…）  
しかしこの間いよいよ`dnf update`が動かなくなりました。  
自動でkillされるみたいです。  
多分メモリ不足ですね。  
ちょっといろいろいじっていると、EPELを無効化するとうまく動くみたいです。  
EPELのupdateか何かがRAMを馬鹿みたいに消費しているみたいですね。  
それにしてもRAMが1GBもあるのに足りなくなるとは思いませんでした。  
512MBにしたときはUbuntuも`apt`が動かなくなったけれど1GBあれば問題なく動いていたので大丈夫だと思っていたんですよね。  
そもそも1年位動いていた（最初からEPELは有効化していた）からいきなり動かなくなったのもよくわからないんですよね。  
というか512MBもあればWindows XPが動くのだからそれくらい頑張って欲しい（暴論）  
というわけでスペックの低い（RAMの少ない）サーバやPCでRHEL系とかFedora使うのはやめたほうが良いですね。  
パッケージマネージャも高速で軽快かつ余計なサービスの動いていないArch Linuxを使いましょう。
